{"ast":null,"code":"var _jsxFileName = \"/Users/bryancancel/Documents/sourceControl/b-cancel.github.io/react/portfolio/src/visible.js\";\nimport React, { Component, createRef } from 'react';\nimport Observer from '@researchgate/react-intersection-observer';\nimport ReactFreezeframe from 'react-freezeframe';\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst getPrintableThreshold = (ratio, range) => range.reduce((prev, curr) => Math.abs(curr - ratio) < Math.abs(prev - ratio) ? curr : prev); //TODO: I should fix this so the GIFs also autoplay when they show while initially showing page\n\n\nexport default class PlayGifWhenVisible extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      visibility: null,\n      threshold: 0.01\n    };\n    this.freeze = /*#__PURE__*/createRef();\n  }\n\n  render() {\n    var identifier = this.props.src;\n    console.log(\"ID is \" + identifier); //identifier = identifier.replace(/giphy.gif/g,'');\n\n    const desiredThreshold = this.props.threshold;\n    const stylingString = this.props.landscape ? `` : `\n      #${identifier} div, ${identifier} img {\n        height:100%;\n      }\n\n      #${identifier} img {\n        object-fit: contain;\n      }\n    `;\n    return /*#__PURE__*/_jsxDEV(Observer, {\n      onChange: ({\n        isIntersecting,\n        intersectionRatio\n      }) => {\n        if (isIntersecting) {\n          console.log(\"VISIBLE\");\n          this.start();\n          this.start();\n        } else {\n          console.log(\"HIDDEN\");\n          this.stop();\n        } //unsure if this is required\n\n        /*\n        this.setState({\n          visibility: isIntersecting ? true : false,\n          threshold: getPrintableThreshold(\n            intersectionRatio.toFixed(2),\n            [desiredThreshold],\n          ),\n        });\n        */\n\n      },\n      threshold: [desiredThreshold],\n      children: /*#__PURE__*/_jsxDEV(Stack, {\n        children: [/*#__PURE__*/_jsxDEV(\"style\", {\n          dangerouslySetInnerHTML: {\n            __html: stylingString\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          id: identifier,\n          children: /*#__PURE__*/_jsxDEV(ReactFreezeframe, {\n            src: this.props.src,\n            ref: this.freeze,\n            options: {\n              trigger: false,\n              overlay: false\n            },\n            onToggle: (items, isPlaying) => this.logEvent('toggle', items, isPlaying),\n            onStart: items => this.logEvent('start', items),\n            onStop: items => this.logEvent('stop', items)\n          }, this.props.src, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }, this);\n  }\n\n  start() {\n    console.log(\"START\");\n    this.freeze.current.start();\n  }\n\n  stop() {\n    console.log(\"STOP\");\n    this.freeze.current.stop();\n  }\n\n  toggle() {\n    this.freeze.current.toggle();\n  }\n\n  logEvent(event, items, isPlaying) {\n    console.log(event, items, isPlaying);\n  }\n\n}","map":{"version":3,"sources":["/Users/bryancancel/Documents/sourceControl/b-cancel.github.io/react/portfolio/src/visible.js"],"names":["React","Component","createRef","Observer","ReactFreezeframe","Box","Stack","getPrintableThreshold","ratio","range","reduce","prev","curr","Math","abs","PlayGifWhenVisible","constructor","props","state","visibility","threshold","freeze","render","identifier","src","console","log","desiredThreshold","stylingString","landscape","isIntersecting","intersectionRatio","start","stop","__html","trigger","overlay","items","isPlaying","logEvent","current","toggle","event"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,OAAOC,QAAP,MAAqB,2CAArB;AACA,OAAOC,gBAAP,MAA6B,mBAA7B;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;;;AAEA,MAAMC,qBAAqB,GAAG,CAACC,KAAD,EAAQC,KAAR,KAC5BA,KAAK,CAACC,MAAN,CAAa,CAACC,IAAD,EAAOC,IAAP,KACXC,IAAI,CAACC,GAAL,CAASF,IAAI,GAAGJ,KAAhB,IAAyBK,IAAI,CAACC,GAAL,CAASH,IAAI,GAAGH,KAAhB,CAAzB,GAAkDI,IAAlD,GAAyDD,IAD3D,CADF,C,CAIA;;;AACA,eAAe,MAAMI,kBAAN,SAAiCd,SAAjC,CAA2C;AAMxDe,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AADiB,SALnBC,KAKmB,GALX;AACNC,MAAAA,UAAU,EAAE,IADN;AAENC,MAAAA,SAAS,EAAE;AAFL,KAKW;AAEjB,SAAKC,MAAL,gBAAcnB,SAAS,EAAvB;AACD;;AAEDoB,EAAAA,MAAM,GAAG;AACP,QAAIC,UAAU,GAAG,KAAKN,KAAL,CAAWO,GAA5B;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAWH,UAAvB,EAFO,CAGP;;AACA,UAAMI,gBAAgB,GAAG,KAAKV,KAAL,CAAWG,SAApC;AACA,UAAMQ,aAAa,GAAG,KAAKX,KAAL,CAAWY,SAAX,GAAwB,EAAxB,GAA6B;AACvD,SAASN,UAAW,SAAQA,UAAW;AACvC;AACA;AACA;AACA,SAASA,UAAW;AACpB;AACA;AACA,KARI;AASA,wBAEI,QAAC,QAAD;AACA,MAAA,QAAQ,EAAE,CAAC;AAAEO,QAAAA,cAAF;AAAkBC,QAAAA;AAAlB,OAAD,KAA2C;AACnD,YAAGD,cAAH,EAAkB;AAChBL,UAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA,eAAKM,KAAL;AACA,eAAKA,KAAL;AACD,SAJD,MAIO;AACLP,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,eAAKO,IAAL;AACD,SARkD,CAUnD;;AACA;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACS,OArBD;AAsBA,MAAA,SAAS,EAAE,CAACN,gBAAD,CAtBX;AAAA,6BAwBA,QAAC,KAAD;AAAA,gCACA;AACF,UAAA,uBAAuB,EAAE;AACvBO,YAAAA,MAAM,EAAEN;AADe;AADvB;AAAA;AAAA;AAAA;AAAA,gBADA,eAMA;AAAM,UAAA,EAAE,EAAEL,UAAV;AAAA,iCACA,QAAC,gBAAD;AAEE,YAAA,GAAG,EAAE,KAAKN,KAAL,CAAWO,GAFlB;AAGE,YAAA,GAAG,EAAE,KAAKH,MAHZ;AAIE,YAAA,OAAO,EAAE;AACPc,cAAAA,OAAO,EAAE,KADF;AAEPC,cAAAA,OAAO,EAAE;AAFF,aAJX;AAQE,YAAA,QAAQ,EAAE,CAACC,KAAD,EAAQC,SAAR,KAAsB,KAAKC,QAAL,CAAc,QAAd,EAAwBF,KAAxB,EAA+BC,SAA/B,CARlC;AASE,YAAA,OAAO,EAAGD,KAAD,IAAW,KAAKE,QAAL,CAAc,OAAd,EAAuBF,KAAvB,CATtB;AAUE,YAAA,MAAM,EAAGA,KAAD,IAAW,KAAKE,QAAL,CAAc,MAAd,EAAsBF,KAAtB;AAVrB,aACO,KAAKpB,KAAL,CAAWO,GADlB;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,gBANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAxBA;AAAA;AAAA;AAAA;AAAA,YAFJ;AAiDD;;AAEDQ,EAAAA,KAAK,GAAG;AACNP,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,SAAKL,MAAL,CAAYmB,OAAZ,CAAoBR,KAApB;AACD;;AACDC,EAAAA,IAAI,GAAG;AACLR,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,SAAKL,MAAL,CAAYmB,OAAZ,CAAoBP,IAApB;AACD;;AACDQ,EAAAA,MAAM,GAAG;AACP,SAAKpB,MAAL,CAAYmB,OAAZ,CAAoBC,MAApB;AACD;;AACDF,EAAAA,QAAQ,CAACG,KAAD,EAAQL,KAAR,EAAeC,SAAf,EAA0B;AAChCb,IAAAA,OAAO,CAACC,GAAR,CAAYgB,KAAZ,EAAmBL,KAAnB,EAA0BC,SAA1B;AACD;;AAzFuD","sourcesContent":["import React, { Component, createRef } from 'react';\nimport Observer from '@researchgate/react-intersection-observer';\nimport ReactFreezeframe from 'react-freezeframe';\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\n\nconst getPrintableThreshold = (ratio, range) =>\n  range.reduce((prev, curr) =>\n    Math.abs(curr - ratio) < Math.abs(prev - ratio) ? curr : prev);\n\n//TODO: I should fix this so the GIFs also autoplay when they show while initially showing page\nexport default class PlayGifWhenVisible extends Component {\n  state = {\n    visibility: null,\n    threshold: 0.01,\n  };\n\n  constructor(props) {\n    super(props);\n    this.freeze = createRef();\n  }\n\n  render() {\n    var identifier = this.props.src;\n    console.log(\"ID is \" + identifier);\n    //identifier = identifier.replace(/giphy.gif/g,'');\n    const desiredThreshold = this.props.threshold;\n    const stylingString = this.props.landscape ? `` : `\n      #${identifier} div, ${identifier} img {\n        height:100%;\n      }\n\n      #${identifier} img {\n        object-fit: contain;\n      }\n    `;\n    return (\n        \n        <Observer\n        onChange={({ isIntersecting, intersectionRatio }) => {\n          if(isIntersecting){\n            console.log(\"VISIBLE\");\n            this.start();\n            this.start();\n          } else {\n            console.log(\"HIDDEN\");\n            this.stop();\n          }\n\n          //unsure if this is required\n          /*\n          this.setState({\n            visibility: isIntersecting ? true : false,\n            threshold: getPrintableThreshold(\n              intersectionRatio.toFixed(2),\n              [desiredThreshold],\n            ),\n          });\n          */\n        }}\n        threshold={[desiredThreshold]}\n      >\n        <Stack>\n        <style\n      dangerouslySetInnerHTML={{\n        __html: stylingString,\n      }}\n    />\n        <span id={identifier}>\n        <ReactFreezeframe\n          key={this.props.src}\n          src={this.props.src}\n          ref={this.freeze}\n          options={{\n            trigger: false,\n            overlay: false,\n          }}\n          onToggle={(items, isPlaying) => this.logEvent('toggle', items, isPlaying)}\n          onStart={(items) => this.logEvent('start', items)}\n          onStop={(items) => this.logEvent('stop', items)}\n        />\n        </span>\n        </Stack>\n      </Observer>\n    );\n  }\n\n  start() {\n    console.log(\"START\");\n    this.freeze.current.start();\n  }\n  stop() {\n    console.log(\"STOP\");\n    this.freeze.current.stop();\n  }\n  toggle() {\n    this.freeze.current.toggle();\n  }\n  logEvent(event, items, isPlaying) {\n    console.log(event, items, isPlaying);\n  }\n}"]},"metadata":{},"sourceType":"module"}